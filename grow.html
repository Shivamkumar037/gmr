<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grow SMM | India's Fastest SMM Panel Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            green: '#10b981',
                            blue: '#3b82f6',
                            yellow: '#fbbf24'
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .dark .glass { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.05); }
        .bg-gradient-brand { background: linear-gradient(135deg, #10b981 0%, #3b82f6 50%, #fbbf24 100%); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .page-transition { transition: all 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 font-sans min-h-screen transition-colors duration-300">

    <!-- Global Progress Bar -->
    <div id="progress-bar" class="fixed top-0 left-0 h-1 bg-yellow-400 z-[100] transition-all duration-300 w-0"></div>

    <!-- Live Ticker -->
    <div id="live-ticker" class="fixed top-4 right-4 z-[60] pointer-events-none"></div>

    <!-- Toast Notifications Container -->
    <div id="toast-container" class="fixed top-6 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-2 pointer-events-none w-full max-w-xs px-4"></div>

    <!-- App Container -->
    <div id="app" class="relative">
        
        <!-- Auth View -->
        <div id="view-auth" class="min-h-screen flex items-center justify-center p-4 bg-gradient-brand">
            <div class="glass w-full max-w-md p-8 rounded-3xl shadow-2xl animate-float">
                <div class="text-center mb-8">
                    <div id="logo-auth" class="w-20 h-20 bg-white rounded-2xl flex items-center justify-center mx-auto mb-4 cursor-pointer hover:rotate-12 transition-transform">
                        <span class="text-3xl font-black text-blue-600">G</span>
                    </div>
                    <h1 class="text-2xl font-bold text-white">Grow SMM üöÄ</h1>
                    <p class="text-white/80 text-sm mt-2" id="auth-slogan">Grow faster with Grow SMM üöÄ</p>
                </div>

                <!-- Login Form -->
                <div id="login-form">
                    <div class="space-y-4">
                        <input type="text" id="login-user" placeholder="Username" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <input type="password" id="login-pass" placeholder="Password" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <button onclick="handleLogin()" class="w-full bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-bold py-3 rounded-xl transition-all shadow-lg active:scale-95">Abhi Login Karein</button>
                        <p class="text-center text-white/80 text-sm">Account nahi hai? <a href="javascript:void(0)" onclick="toggleAuth(true)" class="text-white font-bold underline">Register Karein</a></p>
                    </div>
                </div>

                <!-- Register Form -->
                <div id="register-form" class="hidden">
                    <div class="space-y-4">
                        <input type="text" id="reg-name" placeholder="Pura Naam (Full Name)" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <input type="text" id="reg-user" placeholder="Username" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <input type="email" id="reg-email" placeholder="Email Address" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <input type="password" id="reg-pass" placeholder="Password" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <button onclick="handleRegister()" class="w-full bg-emerald-400 hover:bg-emerald-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg active:scale-95">Naya Account Banayein</button>
                        <p class="text-center text-white/80 text-sm">Pehle se account hai? <a href="javascript:void(0)" onclick="toggleAuth(false)" class="text-white font-bold underline">Login Karein</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard View -->
        <div id="view-dashboard" class="hidden min-h-screen flex flex-col md:flex-row bg-slate-50 dark:bg-slate-900">
            
            <!-- Sidebar -->
            <aside id="sidebar" class="hidden md:flex flex-col w-64 glass m-4 rounded-3xl overflow-hidden sticky top-4 h-[calc(100vh-2rem)] z-50">
                <div class="p-6">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gradient-brand rounded-lg flex items-center justify-center text-white font-bold">G</div>
                        <span class="font-extrabold text-xl tracking-tight dark:text-white">GrowSMM</span>
                    </div>
                </div>
                <nav class="flex-1 px-4 space-y-2 overflow-y-auto no-scrollbar">
                    <button data-nav="home" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-blue-600 text-white font-medium transition-all shadow-blue-500/20 shadow-lg">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                        Dashboard
                    </button>
                    <button data-nav="new-order" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        Naya Order (New)
                    </button>
                    <button data-nav="orders" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                        Order History
                    </button>
                    <button data-nav="wallet" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Wallet (Paisa Daalein)
                    </button>
                </nav>
                <div class="p-4 mt-auto border-t dark:border-white/5">
                    <button onclick="handleLogout()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                        Logout Karein
                    </button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="flex-1 p-4 md:p-8 overflow-y-auto no-scrollbar mb-20 md:mb-0">
                <!-- Header -->
                <header class="flex justify-between items-center mb-8">
                    <div>
                        <h2 id="greeting-text" class="text-2xl font-bold dark:text-white">Namaste, User! üëã</h2>
                        <p class="text-slate-500 text-sm">Real engagement. Real growth. üöÄ</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button id="theme-toggle" class="p-3 rounded-xl glass hover:scale-110 transition-transform">
                            <span class="dark:hidden">üåô</span><span class="hidden dark:block">‚òÄÔ∏è</span>
                        </button>
                        <div class="flex items-center gap-3 p-1 px-3 glass rounded-2xl">
                            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold" id="user-avatar">U</div>
                            <div class="hidden sm:block">
                                <p class="text-xs font-bold leading-none" id="user-name-display">User</p>
                                <p class="text-[10px] text-slate-500">Wallet: ‚Çπ<span id="user-balance-display">0.00</span></p>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Content: Home -->
                <div id="content-home" class="page-transition space-y-6">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div class="glass p-6 rounded-3xl border-l-4 border-l-emerald-500">
                            <p class="text-slate-500 text-xs font-medium">Kul Balance (Total)</p>
                            <h3 class="text-3xl font-black mt-1 text-emerald-600 dark:text-emerald-400">‚Çπ<span id="stat-balance">0.00</span></h3>
                            <div class="w-full h-1 bg-emerald-100 rounded-full mt-4 overflow-hidden">
                                <div id="balance-meter" class="h-full bg-emerald-500 w-0 transition-all duration-500"></div>
                            </div>
                        </div>
                        <div class="glass p-6 rounded-3xl border-l-4 border-l-blue-500">
                            <p class="text-slate-500 text-xs font-medium">Kul Orders</p>
                            <h3 class="text-3xl font-black mt-1 text-blue-600 dark:text-blue-400" id="stat-orders">0</h3>
                        </div>
                        <div class="glass p-6 rounded-3xl border-l-4 border-l-yellow-500">
                            <p class="text-slate-500 text-xs font-medium">Kharch Kiye (Spent)</p>
                            <h3 class="text-3xl font-black mt-1 text-yellow-600 dark:text-yellow-500">‚Çπ<span id="stat-spent">0.00</span></h3>
                        </div>
                    </div>

                    <div class="bg-gradient-brand p-8 rounded-3xl text-white relative overflow-hidden group">
                        <div class="relative z-10">
                            <h4 class="text-2xl font-black mb-2 leading-tight">Social Media Par Chha Jao! üöÄ</h4>
                            <p class="text-white/80 text-sm mb-4">Sabse saste aur fast Indian services sirf Grow SMM par.</p>
                            <button onclick="navigate('new-order')" class="bg-white text-blue-600 px-6 py-2 rounded-xl font-bold shadow-lg transform hover:scale-105 transition-transform">Order Lagayein</button>
                        </div>
                        <div class="absolute -right-10 -bottom-10 opacity-20 transform -rotate-12 group-hover:rotate-0 transition-transform">
                            <svg class="w-48 h-48" fill="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14H11V21L20 10H13Z"/></svg>
                        </div>
                    </div>
                </div>

                <!-- Content: New Order -->
                <div id="content-new-order" class="page-transition hidden space-y-6">
                    <div class="glass p-6 rounded-3xl max-w-2xl mx-auto shadow-xl">
                        <h4 class="text-xl font-bold mb-6 dark:text-white">Naya Order Lagayein</h4>
                        <div class="space-y-5">
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Category Chunein</label>
                                <select id="order-category" onchange="updateServices()" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white">
                                    <option value="ig-likes">Instagram Likes</option>
                                    <option value="ig-views">Instagram Views</option>
                                    <option value="ig-comments">Instagram Comments</option>
                                    <option value="ig-followers">Instagram Followers</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Service Chunein</label>
                                <select id="order-service" onchange="calculatePrice()" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none dark:text-white"></select>
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Link Dalein</label>
                                <input type="url" id="order-link" placeholder="https://instagram.com/p/..." class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 outline-none dark:text-white">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Quantity</label>
                                    <input type="number" id="order-qty" oninput="calculatePrice()" value="100" min="10" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 outline-none dark:text-white">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Price (‚Çπ)</label>
                                    <input type="text" id="order-charge" disabled class="w-full p-3 rounded-xl bg-slate-200 dark:bg-slate-700 font-bold text-blue-600 outline-none" value="0.00">
                                </div>
                            </div>
                            <div id="insufficient-msg" class="hidden text-xs text-red-500 font-bold animate-pulse">Paisa kam hai! Wallet recharge karein.</div>
                            <button onclick="placeOrder()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition-all">Order Submit Karein</button>
                        </div>
                    </div>
                </div>

                <!-- Content: Orders -->
                <div id="content-orders" class="page-transition hidden">
                    <div class="glass p-6 rounded-3xl">
                        <h4 class="text-xl font-bold mb-6 dark:text-white">Aapke Orders (History)</h4>
                        <div class="overflow-x-auto no-scrollbar">
                            <table class="w-full text-left">
                                <thead class="text-slate-500 text-xs font-bold uppercase border-b dark:border-white/10">
                                    <tr>
                                        <th class="px-4 py-3">ID</th>
                                        <th class="px-4 py-3">Service</th>
                                        <th class="px-4 py-3">Qty</th>
                                        <th class="px-4 py-3">Cost</th>
                                        <th class="px-4 py-3">Status</th>
                                        <th class="px-4 py-3">Date</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-table-body" class="text-sm"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Content: Wallet -->
                <div id="content-wallet" class="page-transition hidden max-w-xl mx-auto space-y-6">
                    <div class="glass p-8 rounded-3xl text-center">
                        <h4 class="text-2xl font-bold mb-6 dark:text-white">Wallet Mein Paisa Daalein</h4>
                        <div class="mb-8 p-4 bg-white rounded-2xl shadow-inner border inline-block">
                            <!-- Show payment.png from data folder as requested -->
                            <img src="/data/payment.png" alt="Payment QR" class="w-48 h-48 mx-auto object-contain rounded-lg" onerror="this.src='https://placehold.co/200x200?text=Payment+QR+Yahan+Hai'">
                            <p class="text-[10px] text-slate-400 mt-2 font-mono">Scan karke pay karein aur UTR dalein</p>
                        </div>
                        <div class="space-y-4 text-left">
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Kitne Paise Daalein (Min ‚Çπ20)</label>
                                <input type="number" id="pay-amount" placeholder="50" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 outline-none dark:text-white focus:ring-2 focus:ring-emerald-500">
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Transaction ID / UTR Number</label>
                                <input type="text" id="pay-utr" placeholder="12 digit UTR number dalein" class="w-full p-3 rounded-xl bg-slate-100 dark:bg-slate-800 outline-none dark:text-white focus:ring-2 focus:ring-emerald-500">
                            </div>
                            <button onclick="handlePayment()" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-4 rounded-2xl shadow-lg active:scale-95 transition-all">Verify & Paisa Add Karein</button>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Mobile Navbar -->
            <nav class="md:hidden fixed bottom-4 left-4 right-4 h-16 glass rounded-2xl flex items-center justify-around px-4 z-50">
                <button data-nav="home" class="nav-btn-mobile p-2 text-blue-600">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                </button>
                <button data-nav="new-order" class="nav-btn-mobile p-2 text-slate-400">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                </button>
                <button data-nav="orders" class="nav-btn-mobile p-2 text-slate-400">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/></svg>
                </button>
                <button data-nav="wallet" class="nav-btn-mobile p-2 text-slate-400">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                </button>
            </nav>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="modal-overlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[150] hidden items-center justify-center p-4">
        <div class="glass max-w-sm w-full p-8 rounded-3xl text-center relative">
            <h5 id="modal-title" class="text-xl font-bold mb-2 dark:text-white">Madaat (Help)</h5>
            <p id="modal-body" class="text-slate-500 mb-6 text-sm"></p>
            <button onclick="closeModal()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl">Theek Hai!</button>
        </div>
    </div>

    <script>
        // --- SERVICES DATA ---
        const SERVICES = {
            'ig-likes': [
                { id: 'l1', name: 'IG Likes [Indian Real]', rate: 0.257 },
                { id: 'l2', name: 'IG Likes [Normal HQ]', rate: 0.126 }
            ],
            'ig-views': [
                { id: 'v1', name: 'IG Views [Indian]', rate: 0.23 },
                { id: 'v2', name: 'IG Views [Global]', rate: 0.17 }
            ],
            'ig-comments': [
                { id: 'c1', name: 'IG 100 Indian Custom Comments', rate: 10, perUnit: 100 },
                { id: 'c2', name: 'IG 100 Emoji Comments', rate: 15, perUnit: 100 }
            ],
            'ig-followers': [
                { id: 'f1', name: 'IG Followers 1K [Other]', rate: 21 },
                { id: 'f2', name: 'IG Followers [10% Drop]', rate: 32 },
                { id: 'f3', name: 'IG Followers [Indian Lifetime]', rate: 46 }
            ]
        };

        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('grow_smm_users')) || [];
        let orders = JSON.parse(localStorage.getItem('grow_smm_orders')) || [];

        // --- AUTH ---
        function toggleAuth(isReg) {
            document.getElementById('login-form').classList.toggle('hidden', isReg);
            document.getElementById('register-form').classList.toggle('hidden', !isReg);
        }

        function handleRegister() {
            const name = document.getElementById('reg-name').value;
            const user = document.getElementById('reg-user').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            if (!name || !user || !pass) return toast("Details bharo!", "error");
            if (users.find(u => u.user === user)) return toast("Username pehle se hai!", "error");

            // Modified: Starting balance is ‚Çπ0
            const newUser = { name, user, email, pass, balance: 0 };
            users.push(newUser);
            localStorage.setItem('grow_smm_users', JSON.stringify(users));
            toast("Account ban gaya! Ab login karein.", "success");
            toggleAuth(false);
        }

        function handleLogin() {
            const user = document.getElementById('login-user').value;
            const pass = document.getElementById('login-pass').value;
            const found = users.find(u => u.user === user && u.pass === pass);

            if (found) {
                currentUser = found;
                sessionStorage.setItem('active_session', JSON.stringify(found));
                initDashboard();
                confetti({ particleCount: 100, spread: 70 });
            } else {
                toast("Ghalat details!", "error");
            }
        }

        function handleLogout() {
            sessionStorage.clear();
            location.reload();
        }

        // --- UI NAVIGATION ---
        function navigate(view) {
            const pb = document.getElementById('progress-bar');
            pb.style.width = '100%';
            setTimeout(() => pb.style.width = '0%', 400);

            document.querySelectorAll('.page-transition').forEach(el => el.classList.add('hidden'));
            const target = document.getElementById(`content-${view}`);
            if (target) target.classList.remove('hidden');

            document.querySelectorAll('.nav-btn, .nav-btn-mobile').forEach(btn => {
                const isActive = btn.dataset.nav === view;
                btn.classList.toggle('bg-blue-600', isActive);
                btn.classList.toggle('text-white', isActive);
                btn.classList.toggle('text-slate-400', !isActive);
                btn.classList.toggle('text-slate-500', !isActive);
            });

            if (view === 'orders') renderOrders();
        }

        // --- CORE LOGIC ---
        function initDashboard() {
            document.getElementById('view-auth').classList.add('hidden');
            document.getElementById('view-dashboard').classList.remove('hidden');
            document.getElementById('greeting-text').innerText = `Namaste, ${currentUser.name.split(' ')[0]}! üëã`;
            document.getElementById('user-avatar').innerText = currentUser.name[0];
            document.getElementById('user-name-display').innerText = currentUser.name;
            updateBalanceUI();
            updateServices();
            renderOrders();
            startLiveTicker();

            document.querySelectorAll('.nav-btn, .nav-btn-mobile').forEach(btn => {
                btn.addEventListener('click', () => navigate(btn.dataset.nav));
            });
        }

        function updateBalanceUI() {
            const bal = parseFloat(currentUser.balance).toFixed(2);
            document.getElementById('user-balance-display').innerText = bal;
            document.getElementById('stat-balance').innerText = bal;
            
            const spent = orders.filter(o => o.user === currentUser.user).reduce((a, b) => a + b.cost, 0);
            document.getElementById('stat-spent').innerText = spent.toFixed(2);
            document.getElementById('stat-orders').innerText = orders.filter(o => o.user === currentUser.user).length;
            
            const meter = document.getElementById('balance-meter');
            meter.style.width = Math.min((bal / 1000) * 100, 100) + '%';
        }

        function updateServices() {
            const cat = document.getElementById('order-category').value;
            const sel = document.getElementById('order-service');
            sel.innerHTML = '';
            SERVICES[cat].forEach(s => {
                sel.innerHTML += `<option value="${s.id}">${s.name} - ‚Çπ${s.rate}</option>`;
            });
            calculatePrice();
        }

        function calculatePrice() {
            const cat = document.getElementById('order-category').value;
            const sid = document.getElementById('order-service').value;
            const qty = parseInt(document.getElementById('order-qty').value) || 0;
            const svc = SERVICES[cat].find(s => s.id === sid);
            
            const cost = svc.perUnit ? (qty / svc.perUnit) * svc.rate : (qty / 1000) * svc.rate;
            document.getElementById('order-charge').value = cost.toFixed(3);
            document.getElementById('insufficient-msg').classList.toggle('hidden', cost <= currentUser.balance);
        }

        function placeOrder() {
            const link = document.getElementById('order-link').value;
            const qty = parseInt(document.getElementById('order-qty').value);
            const cost = parseFloat(document.getElementById('order-charge').value);
            
            if (!link || qty < 10) return toast("Link aur quantity check karein!", "error");
            if (cost > currentUser.balance) return toast("Paisa nahi hai!", "error");

            currentUser.balance -= cost;
            const newOrder = {
                id: 'ORD' + Math.floor(Math.random()*90000+10000),
                user: currentUser.user,
                service: document.getElementById('order-service').selectedOptions[0].text.split(' - ')[0],
                qty, cost, status: 'Pending', date: new Date().toLocaleString()
            };

            orders.unshift(newOrder);
            save();
            toast("Order lag gaya! üöÄ", "success");
            updateBalanceUI();
            navigate('orders');
        }

        function renderOrders() {
            const tbody = document.getElementById('orders-table-body');
            tbody.innerHTML = '';
            orders.filter(o => o.user === currentUser.user).forEach(o => {
                tbody.innerHTML += `
                    <tr class="border-b dark:border-white/5 hover:bg-slate-50 dark:hover:bg-slate-800/50">
                        <td class="px-4 py-4 font-mono text-xs">${o.id}</td>
                        <td class="px-4 py-4">${o.service}</td>
                        <td class="px-4 py-4">${o.qty}</td>
                        <td class="px-4 py-4 font-bold">‚Çπ${o.cost.toFixed(2)}</td>
                        <td class="px-4 py-4"><span class="px-2 py-1 rounded-full text-[10px] bg-yellow-100 text-yellow-600 font-bold">${o.status}</span></td>
                        <td class="px-4 py-4 text-xs text-slate-400">${o.date}</td>
                    </tr>
                `;
            });
        }

        // --- PAYMENT ---
        function handlePayment() {
            const amt = parseFloat(document.getElementById('pay-amount').value);
            const utr = document.getElementById('pay-utr').value;

            if (amt < 20) return toast("Minimum ‚Çπ20", "error");
            
            // Modified: Hidden UTR validation GROWSMM12345
            if (utr === "GROWSMM12345") {
                currentUser.balance += amt;
                save();
                updateBalanceUI();
                toast(`‚Çπ${amt} wallet mein add ho gaye!`, "success");
                confetti({ particleCount: 150 });
                navigate('home');
            } else {
                toast("Ghalat UTR! Payment fail ho gayi.", "error");
            }
        }

        function save() {
            const i = users.findIndex(u => u.user === currentUser.user);
            users[i] = currentUser;
            localStorage.setItem('grow_smm_users', JSON.stringify(users));
            localStorage.setItem('grow_smm_orders', JSON.stringify(orders));
        }

        function toast(m, t) {
            const c = document.getElementById('toast-container');
            const d = document.createElement('div');
            d.className = `${t === "success" ? "bg-emerald-500" : "bg-red-500"} text-white px-6 py-3 rounded-2xl shadow-xl animate-bounce-in pointer-events-auto`;
            d.innerHTML = m;
            c.appendChild(d);
            setTimeout(() => d.remove(), 3000);
        }

        function startLiveTicker() {
            setInterval(() => {
                const t = document.getElementById('live-ticker');
                const i = document.createElement('div');
                i.className = "glass px-4 py-2 rounded-full text-[10px] font-bold shadow-xl mb-2 animate-fade-in dark:text-white";
                i.innerHTML = `üî• Naya order received: ‚Çπ${(Math.random()*100).toFixed(2)}`;
                t.appendChild(i);
                setTimeout(() => i.remove(), 4000);
            }, 10000);
        }

        window.onload = () => {
            const s = sessionStorage.getItem('active_session');
            if (s) {
                currentUser = users.find(u => u.user === JSON.parse(s).user);
                initDashboard();
            }
            document.getElementById('theme-toggle').onclick = () => document.documentElement.classList.toggle('dark');
        };
    </script>
</body>
</html>

